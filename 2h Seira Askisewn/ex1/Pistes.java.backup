import java.io.*;
import java.util.*;
import java.lang.*;


class Pista implements Comparable<Pista>{

    int id;
    ArrayList<Integer> needed;
    ArrayList<Integer> earnings;
    long stars;

    public Pista(int id, ArrayList<Integer> needed, ArrayList<Integer> earnings, long stars){
        this.id = id;
        this.needed = needed;
        this.earnings = earnings;
        this.stars = stars;
    }

    public int getID(){
        return id;
    }

    public ArrayList<Integer> getNeeded(){
        return needed;
    }

    public ArrayList<Integer> getEarnings(){
        return earnings;
    }

    public int getNumberOfNeeded(){
        return needed.size();
    }

    public int getNumberOfEarnings(){
        return earnings.size();
    }

    public long getStars(){
        return stars;
    }


    @Override
    public int compareTo(Pista p){

        int tN = p.getNumberOfNeeded();
        int tE = p.getNumberOfEarnings();
        long tS = p.getStars();
        int ret = 0;

        if (tN > this.getNumberOfNeeded()) ret = -1;
        else if (tN < this.getNumberOfNeeded()) ret = 1;
        else ret = 0;

        if (ret == 0) {
            if (tE > this.getNumberOfEarnings()) ret = 1;
            else if (tE < this.getNumberOfEarnings()) ret = -1;
            else ret = 0;
        }

        if (ret == 0) {
            if (tS > this.getStars()) ret = 1;
            else if (tS < this.getStars()) ret = -1;
            else ret = 0;
        }

        return ret;
    }


}

class Player {

    Pista currPista;
    ArrayList<Integer> keysOwn;
    long totalStars;

    public Player(Pista currPista, ArrayList<Integer> keysOwn, long totalStars){
        this.currPista = currPista;
        this.keysOwn = keysOwn;
        this.totalStars = totalStars;
    }

    public long getTotalStars(){
        return totalStars;
    }

    public Pista getCurrPista(){
        return currPista;
    }

    public ArrayList<Integer> getKeysOwn(){
        return keysOwn;
    }
/*
    public Pista giveMeNextPista(ArrayList<Pista> availablePistes){

        for (Pista it : restPistes) {
            ArrayList<Integer> itNeeded = it.getNeeded();
            ArrayList<Integer> common = new ArrayList<Integer>(itNeeded);
            common.retainAll(this.getNeeded());
            System.out.println("The common collection is : " + common);
        }

        return it;

    }
*/
}

public class Pistes {

    public static void printArrayList(ArrayList<Integer> l){
        System.out.println("Tha tupwsw ena arraylist me kleidia");

        for (int it : l){
            System.out.print(it + "  " );
        }

        System.out.print("\n");
    }

    public static ArrayList<Pista> giveMeAllPistesAvailable(ArrayList<Pista> l, int keyNumber){

        ArrayList<Pista> ret = new ArrayList<Pista>();
        for (Pista p : l){
            if (p.getNumberOfNeeded() <= keyNumber) {
                ret.add(p);
            }
        }

        return ret;
    }

    public static void main (String[] args){
        try{

            BufferedReader reader = new BufferedReader(new FileReader(args[0]));
            String line = reader.readLine();
            int N = Integer.parseInt(line);
            int counter = 0;
            ArrayList<Pista> allPistes = new ArrayList<Pista>();

            System.out.println(N);
            line = reader.readLine();
            while(line != null && !(line.matches("\\s*"))) {

                String[] splitted = line.split(" ");
                int curN = splitted.length, kneeded = Integer.parseInt(splitted[0]), kearnings = Integer.parseInt(splitted[1]);
                long curStars = Long.parseLong(splitted[2]);
                ArrayList<Integer> curNeeded = new ArrayList<Integer>();
                ArrayList<Integer> curEarnings = new ArrayList<Integer>();
                int j = 3;

                for(int i = 0; i < kneeded; i++){
                    curNeeded.add(Integer.parseInt(splitted[j++]));
                }


                for(int i = 0; i < kearnings; i++){
                    curEarnings.add(Integer.parseInt(splitted[j++]));
                }


                Pista newPista = new Pista(counter++,curNeeded,curEarnings,curStars);
                allPistes.add(newPista);
                line = reader.readLine();
            }

        //    Collections.sort(allPistes);


            Pista start = allPistes.get(0);
            allPistes.remove(0);
            ArrayList<Integer> startKeys = start.getEarnings();
            long startStars = start.getStars();

            Player myPlayer = new Player(start, startKeys, startStars);

            System.out.println("Eimai o player kai ksekinaw apo thn Pista " + start.getID() + " kai molis kerdisa " + startKeys.size() + " kai sunolika asteria exw " + startStars);

            printArrayList(startKeys);

            ArrayList<Pista> tmpAvailable = allPistes;
            while( ! myPlayer.getKeysOwn().isEmpty() ) {
                tmpAvailable = giveMeAllPistesAvailable(tmpAvailable, myPlayer.getKeysOwn().size());
                Collections.sort(tmpAvailable);
            }

        }
        catch(IOException e){
            e.printStackTrace();
        }
    }

}
